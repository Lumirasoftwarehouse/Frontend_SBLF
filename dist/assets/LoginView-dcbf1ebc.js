import{i as U,u as D,f,g as E,w as R,j as O,o as d,k as S,l as m,_ as w,m as j,c as h,a as s,h as I,q as _,v as b,s as H,d as g,n as q,p as P,b as $,x as z,y as F,z as J,A as G}from"./index-21c8bf63.js";import{a as K}from"./axios-21b846bc.js";import{S as W}from"./sweetalert2.all-749d8cbc.js";const Y=U({props:{value:{default:""},chars:{default:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},count:{default:5},hideLines:{type:Boolean,default:!1},customTextColor:{default:""},textColors:{default:()=>[]},isDirty:{type:Boolean,default:!0},width:{default:function(a){return a.count*30}},height:{default:50},canvasClass:{default:""},icon:{default:"refresh"},captchaFont:{default:"bold 28px sans-serif"}},emits:["isValid","getCode","update:modelValue"],setup(a,{emit:t}){const e=a,o=D(),c=f();let n=f(""),i=e.width,u=e.height;E(()=>{C()});const C=()=>{c.value.width=i,c.value.height=u;let l=c.value.getContext("2d");for(let r=0;r<e.count;r++){let v=Math.floor(Math.random()*e.chars.length),y=Math.random()*30*Math.PI/180,x=e.chars[v];n.value+=x;let V=10+r*25,M=30+Math.random()*8;l.font=e.captchaFont,l.translate(V,M),e.customTextColor?l.fillStyle=e.customTextColor:e.textColors.length?l.fillStyle=e.textColors[Math.floor(Math.random()*e.textColors.length)]:l.fillStyle=k(),l.rotate(y),l.fillText(x,0,0),l.rotate(-y),l.translate(-V,-M)}e.hideLines||N(),A()},N=()=>{let l=c.value.getContext("2d");for(let r=0;r<e.count;r++)l.strokeStyle=k(),l.beginPath(),l.moveTo(Math.random()*i,Math.random()*u),l.lineTo(Math.random()*i,Math.random()*u),l.stroke()},A=()=>{t("getCode",n.value)};R(()=>{n.value&&n.value===e.value?t("isValid",!0):t("isValid",!1)}),O(n,l=>{t("update:modelValue",l)});const k=()=>{let l=Math.floor(Math.random()*256),r=Math.floor(Math.random()*256),v=Math.floor(Math.random()*256);return"rgb("+l+","+r+","+v+")"},T=()=>{c.value.getContext("2d").clearRect(0,0,i,u),n.value="",C()},L=()=>m("div",{class:"vue_client_recaptcha"},[m("div",{class:"vue_client_recaptcha_icon",onClick:()=>T()},[m(o.icon?o.icon:"svg",{class:"vue_client_recaptcha_icon_svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M2 12a9 9 0 0 0 9 9c2.39 0 4.68-.94 6.4-2.6l-1.5-1.5A6.706 6.706 0 0 1 11 19c-6.24 0-9.36-7.54-4.95-11.95C10.46 2.64 18 5.77 18 12h-3l4 4h.1l3.9-4h-3a9 9 0 0 0-18 0Z",fill:"#333333"})])]),m("canvas",{id:"captcha_canvas",class:`captcha_canvas ${e.canvasClass}`,ref:c},n.value)]);return(l,r)=>(d(),S(L))}});const Z={components:{VueClientRecaptcha:Y},setup(){const a=f(""),t=H(),e=i=>{n.captchaCode=i},o=i=>{n.isValid=i,i&&c()},c=()=>{t.emit("emitCaptcha",!1)},n=f({captchaCode:null,isValid:!1});return{inputValue:a,data:n,getCaptchaCode:e,checkValidCaptcha:o,captchaM:c}}},Q={class:"sample-captcha"},X={class:"row"},tt={class:"col-sm-6"},et={class:"captcha-box"},st={class:"col-sm-6"},at={class:"data-box"};function ot(a,t,e,o,c,n){const i=j("VueClientRecaptcha");return d(),h("div",Q,[s("div",X,[s("div",tt,[s("section",et,[I(i,{value:o.inputValue,onGetCode:o.getCaptchaCode,onIsValid:o.checkValidCaptcha},null,8,["value","onGetCode","onIsValid"])])]),s("div",st,[s("section",at,[_(s("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.inputValue=u),placeholder:"Masukkan captcha",class:"input",type:"text"},null,512),[[b,o.inputValue]])])])])])}const lt=w(Z,[["render",ot]]);const nt={data(){return{showChatBox:!1,message:"",phoneNumber:"081907150504",nama:"",lokasi:""}},methods:{toggleChatBox(){this.showChatBox=!this.showChatBox,this.showChatBox||(this.message="")},async sendMessage(){const a=encodeURIComponent(this.message),t=sessionStorage.getItem("token");if(t)try{const e=JSON.parse(atob(t.split(".")[1]));this.nama=e.name,this.lokasi=e.namaLokasi;const o=`https://wa.me/${this.phoneNumber}?text=Nama%3A%20${this.nama}%0ALokasi%3A%20${this.lokasi}%0APath%3A%20${this.$route.path}%0APesan%3A%20${a}`;window.open(o,"_blank"),this.message="",this.toggleChatBox()}catch(e){console.error("Error decoding token:",e)}else{const e=`https://wa.me/${this.phoneNumber}?text=${a}`;window.open(e,"_blank"),this.message="",this.toggleChatBox()}}},created(){}},B=a=>(P("data-v-b643c777"),a=a(),$(),a),it={class:"chat-container"},ct={key:0,class:"chat-box"},rt=B(()=>s("div",{class:"text-primary fw-bold"},"Halo, ada yang bisa dibantu?",-1)),dt=B(()=>s("i",{class:"fab fa-whatsapp"},null,-1)),ht=[dt];function ut(a,t,e,o,c,n){return d(),h("div",it,[c.showChatBox?(d(),h("div",ct,[rt,_(s("textarea",{class:"form-control",id:"chat","onUpdate:modelValue":t[0]||(t[0]=i=>c.message=i),rows:"2"},null,512),[[b,c.message]]),s("button",{onClick:t[1]||(t[1]=(...i)=>n.sendMessage&&n.sendMessage(...i)),class:"float-end"},"Kirim")])):g("",!0),s("div",{class:q(["whatsapp-icon",{active:c.showChatBox}]),onClick:t[2]||(t[2]=(...i)=>n.toggleChatBox&&n.toggleChatBox(...i))},ht,2)])}const pt=w(nt,[["render",ut],["__scopeId","data-v-b643c777"]]);const p=a=>(P("data-v-760a3b47"),a=a(),$(),a),mt={class:"container"},gt={class:"row justify-content-center"},_t={class:"col-xl-10 col-lg-12 col-md-9"},ft={class:"card o-hidden border-0 shadow-lg my-5"},vt={class:"card-body p-0"},wt={class:"row"},bt=p(()=>s("div",{class:"col-lg-6 d-none d-lg-block bg-login-image"},null,-1)),Ct={class:"col-lg-6"},kt={class:"p-5"},yt=p(()=>s("div",{class:"text-center"},[s("h1",{class:"h4 text-gray-900 mb-4"},"Selamat Datang!")],-1)),xt={class:"form-group"},Vt={class:"form-group"},Mt={class:"row"},St={class:"col-10"},It=["type"],Pt={class:"col-2"},$t={class:"form-group"},Bt={class:"custom-control custom-checkbox small"},Nt=p(()=>s("label",{class:"custom-control-label",for:"customCheck"},"Ingat Saya",-1)),At={key:0,class:"confirmHuman"},Tt=p(()=>s("img",{width:"48",height:"48",src:"https://img.icons8.com/fluency/48/checked.png",alt:"checked"},null,-1)),Lt=p(()=>s("button",{type:"submit",class:"btn btn-primary btn-user btn-block mt-3"}," Masuk ",-1)),Ut=p(()=>s("hr",null,null,-1)),Dt={data(){return{form:{email:null,password:null},uniqueValue:"",cheked:!1,captchaValidate:!0,showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},captchaCode(a){this.captchaValidate=a},login(){const a=new FormData;a.append("email",this.form.email),a.append("password",this.form.password),K.post("https://backend-sblf.lumirainternational.com/api/auth/login",a).then(t=>{if(this.cheked===!0){const o=JSON.stringify(this.form);localStorage.setItem("login",o)}else localStorage.getItem("login")&&localStorage.removeItem("login");const e=t.data.access_token;sessionStorage.setItem("token",e),this.$router.push("/admin-dashboard")}).catch(t=>{console.error(t),this.captchaValidate=!0,W.fire({icon:"error",title:"Oops...",text:"Login gagal. Periksa kembali email dan password Anda."})})}},mounted(){const a=document.querySelector("body");a.style.backgroundImage="url(/img/wilayah.jpg)",a.style.backgroundRepeat="no-repeat",a.style.backgroundSize="cover"},created(){const a=localStorage.getItem("login");a&&(this.form=JSON.parse(a),this.cheked=!0)}},Et=Object.assign(Dt,{__name:"LoginView",setup(a){return(t,e)=>(d(),h("div",mt,[I(pt),s("div",gt,[s("div",_t,[s("div",ft,[s("div",vt,[s("div",wt,[bt,s("div",Ct,[s("div",kt,[yt,s("form",{class:"user",onSubmit:e[5]||(e[5]=z((...o)=>t.login&&t.login(...o),["prevent"]))},[s("div",xt,[_(s("input",{type:"email",class:"form-control form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",placeholder:"Masukkan Email","onUpdate:modelValue":e[0]||(e[0]=o=>t.form.email=o)},null,512),[[b,t.form.email]])]),s("div",Vt,[s("div",Mt,[s("div",St,[_(s("input",{type:t.showPassword?"text":"password",class:"form-control form-control-user",id:"exampleInputPassword",placeholder:"Masukkan Password","onUpdate:modelValue":e[1]||(e[1]=o=>t.form.password=o)},null,8,It),[[F,t.form.password]])]),s("div",Pt,[t.showPassword?g("",!0):(d(),h("i",{key:0,class:"bi customIcon bi-eye-slash-fill",onClick:e[2]||(e[2]=(...o)=>t.togglePasswordVisibility&&t.togglePasswordVisibility(...o))})),t.showPassword?(d(),h("i",{key:1,class:"bi customIcon bi-eye-fill",onClick:e[3]||(e[3]=(...o)=>t.togglePasswordVisibility&&t.togglePasswordVisibility(...o))})):g("",!0)])])]),s("div",$t,[s("div",Bt,[_(s("input",{type:"checkbox",class:"custom-control-input",id:"customCheck","onUpdate:modelValue":e[4]||(e[4]=o=>t.cheked=o)},null,512),[[J,t.cheked]]),Nt])]),t.captchaValidate===!1?(d(),h("div",At,[Tt,G(" You are human ")])):g("",!0),t.captchaValidate===!0?(d(),S(lt,{key:1,onEmitCaptcha:t.captchaCode},null,8,["onEmitCaptcha"])):g("",!0),Lt],32),Ut])])])])])])])]))}}),Ht=w(Et,[["__scopeId","data-v-760a3b47"]]);export{Ht as default};
