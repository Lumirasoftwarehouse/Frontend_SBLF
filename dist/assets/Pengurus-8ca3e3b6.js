import{d as b,o as r,c as d,a as e,f as m,l as P,g as _,F as k,r as v,i as c,v as p,t as h}from"./index-e7b1fb08.js";import{S as y,N as w,F as U}from"./Footer-d3c57613.js";import{a as g}from"./axios-21b846bc.js";import{S as B}from"./sweetalert2.all-749d8cbc.js";import"./logo-42795f0e.js";const T={id:"wrapper"},C={id:"content-wrapper",class:"d-flex flex-column"},S={id:"content"},A={class:"container-fluid mt-4"},D=e("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Pengurus",-1),F={class:"row"},N=e("div",{class:"col-1"},null,-1),j={class:"col-10"},I=e("div",{class:"row mb-3"},[e("div",{class:"col-4"},[e("button",{class:"btn blueButton me-2","data-toggle":"modal","data-target":"#addPengurus"}," Tambahkan Pengurus ")]),e("div",{class:"col-8"})],-1),L={class:"table-responsive"},O={key:0,class:"text-center"},V={key:1,class:"display table table-striped"},z=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"50px"}},"No"),e("th",{scope:"col",style:{width:"130px"}},"Aksi"),e("th",{scope:"col"},"Image"),e("th",{scope:"col"},"Nama"),e("th",{scope:"col"},"Deskripsi")])],-1),M=["onClick"],x=e("i",{class:"bi bi-pencil-square"},null,-1),K=[x],E=["onClick"],H=e("i",{class:"bi bi-trash3-fill"},null,-1),J=[H],q=["src"],W=e("div",{class:"col-1"},null,-1),G={class:"modal fade",id:"addPengurus",tabindex:"-1",role:"dialog","aria-labelledby":"addPengurusLabel","aria-hidden":"true"},Q={class:"modal-dialog",role:"document"},R={class:"modal-content"},X=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addPengurusLabel"},"Tambahkan Pengurus"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1),Y={class:"modal-body"},Z={class:"mb-3"},ee=e("label",{for:"image",class:"form-label"},"Image",-1),ae={class:"mb-3"},se=e("label",{for:"nama",class:"form-label"},"Nama",-1),te={class:"mb-3"},oe=e("label",{for:"deskripsi",class:"form-label"},"Deskripsi",-1),ne={class:"modal-footer"},ie=e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Batal ",-1),le={class:"modal",id:"updatePengurus",tabindex:"-1",role:"dialog","aria-labelledby":"updatePengurusLabel","aria-hidden":"true"},re={class:"modal-dialog",role:"document"},de={class:"modal-content"},ue=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"updatePengurusLabel"},"Update Pengurus"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1),ce={class:"modal-body"},pe={class:"mb-3"},he=e("label",{for:"image",class:"form-label"},"Image",-1),ge={class:"mb-3"},me=e("label",{for:"nama",class:"form-label"},"Nama",-1),be={class:"mb-3"},_e=e("label",{for:"deskripsi",class:"form-label"},"Deskripsi",-1),ke={class:"modal-footer"},fe=e("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal"}," Batal ",-1),Pe={data(){return{newBenefit:"",dataPengurus:{image:null,judul:"",desripsi:""},dataUpdatePengurus:{image:"",judul:"",desripsi:""},pengurus:[],dataBenefit:"",idTrend:"",user_id:"",ready:!1,remainingTime:"Loading"}},methods:{setDataPengurus(a,n,i,l){this.idTrend=a,this.dataUpdatePengurus.nama=n,this.dataUpdatePengurus.deskripsi=l,this.dataUpdatePengurus.image=i},async updatePengurus(){try{const a=new FormData;a.append("image",this.dataPengurus.image),a.append("nama",this.dataUpdatePengurus.nama),a.append("deskripsi",this.dataUpdatePengurus.deskripsi);const n=await g.post(`https://backend-sblf.lumirainternational.com/api/auth/update-pengurus/${this.idTrend}`,a,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(n.data),this.updatePengurus="",this.fetchPengurus(),this.showAlert("Success","Anggota berhasil diupdate","success")}catch(a){console.error(a),this.showAlert("Oops...","Terjadi kesalahan saat mengupdate anggota","error")}},async tambahPengurus(){try{const a=new FormData;a.append("image",this.dataPengurus.image),a.append("nama",this.dataPengurus.nama),a.append("deskripsi",this.dataPengurus.deskripsi);const n=await g.post("https://backend-sblf.lumirainternational.com/api/auth/create-pengurus",a,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(n.data),this.dataPengurus={image:null,judul:""},this.dataPengurus.image=null,this.fetchPengurus(),this.showAlert("Berhasil!","Data pengurus berhasil ditambahkan.","success")}catch(a){console.error(a),this.showAlert("Opps...","Terjadi kesalahan saat menambahkan data pengurus.","error")}},async deletePengurus(){try{const a=await g.delete(`https://backend-sblf.lumirainternational.com/api/auth/delete-pengurus/${id}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(a.data),this.fetchPengurus(),this.showAlert("Success","Pengurus berhasil didelete","success")}catch(a){console.error(a),this.showAlert("Oops...","Terjadi kesalahan saat mendelete pengurus","error")}},async fetchPengurus(){this.ready=!1;try{const a=await g.get("https://backend-sblf.lumirainternational.com/api/auth/list-pengurus",{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});this.pengurus=a.data.data,this.ready=!0}catch(a){console.error(a),this.showAlert("Opps...","Terjadi kesalahan saat mengambil data pengurus.","error")}},showAlert(a,n,i){this.$swal({title:a,text:n,icon:i}).then(()=>{$("#addPengurus").modal("hide"),$("#updatePengurus").modal("hide")})},konfirmasi(a,n){B.fire({title:`Apakah Anda yakin ingin menghapus pengurus ${n}?`,text:"Pengurus akan dihapus jika anda menekan tombol Hapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#061387",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(i=>{i.isConfirmed&&this.deletePengurus(idTre)})},handleFileUpload(a){this.dataPengurus.image=a.target.files[0]}},created(){const a=sessionStorage.getItem("token");if(a)try{const[n,i]=a.split("."),l=JSON.parse(atob(n)),t=atob(i),o=JSON.parse(atob(a.split(".")[1])),s=o.exp,u=new Date(s*1e3);console.log("Waktu Kedaluwarsa (UTC):",u.toUTCString()),new Date>u?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman"),this.user_id=o.id,console.log("ini idddd:",this.user_id),(!l||!t)&&this.$router.push("/"),this.fetchPengurus()}catch(n){console.error("Error decoding token:",n),this.$router.push("/")}else this.$router.push("/")}},Te=Object.assign(Pe,{__name:"Pengurus",setup(a){const n=b(!1),i=b(""),l=()=>{n.value=!n.value,i.value=n.value?"toggle-sidebar":""};return(t,o)=>(r(),d(k,null,[e("div",T,[m(y,{class:P(i.value)},null,8,["class"]),e("div",C,[e("div",S,[m(w,{onToggleSidebar:l}),e("div",A,[D,e("div",F,[N,e("div",j,[I,e("div",L,[t.ready?_("",!0):(r(),d("p",O,"Loading...")),t.ready?(r(),d("table",V,[z,e("tbody",null,[(r(!0),d(k,null,v(t.pengurus,(s,u)=>(r(),d("tr",{key:s.id},[e("td",null,h(u+1),1),e("td",null,[e("button",{class:"btn btn-warning me-3","data-toggle":"modal","data-target":"#updatePengurus",onClick:f=>t.setDataPengurus(s.id,s.nama,s.image,s.deskripsi)},K,8,M),e("button",{class:"btn btn-danger",onClick:f=>t.konfirmasi(s.id,s.nama)},J,8,E)]),e("td",null,[e("img",{src:`https://backend-sblf.lumirainternational.com/storage/pengurus/${s.image}`,alt:"trend",width:"200"},null,8,q)]),e("td",null,h(s.nama),1),e("td",null,h(s.deskripsi),1)]))),128))])])):_("",!0)])]),W])])]),m(U)])]),e("div",G,[e("div",Q,[e("div",R,[X,e("div",Y,[e("form",null,[e("div",Z,[ee,e("input",{type:"file",class:"form-control",id:"image",onChange:o[0]||(o[0]=(...s)=>t.handleFileUpload&&t.handleFileUpload(...s))},null,32)]),e("div",ae,[se,c(e("input",{type:"text",class:"form-control",id:"nama","onUpdate:modelValue":o[1]||(o[1]=s=>t.dataPengurus.nama=s),placeholder:"Masukkan nama"},null,512),[[p,t.dataPengurus.nama]])]),e("div",te,[oe,c(e("textarea",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=s=>t.dataPengurus.deskripsi=s),placeholder:"Masukkan deskripsi"},null,512),[[p,t.dataPengurus.deskripsi]])])])]),e("div",ne,[ie,e("button",{type:"button",class:"btn blueButton",onClick:o[3]||(o[3]=(...s)=>t.tambahPengurus&&t.tambahPengurus(...s))}," Kirim ")])])])]),e("div",le,[e("div",re,[e("div",de,[ue,e("div",ce,[e("form",null,[e("div",pe,[he,e("input",{type:"file",class:"form-control",id:"image",onChange:o[4]||(o[4]=(...s)=>t.handleFileUpload&&t.handleFileUpload(...s))},null,32),e("p",null,h(t.dataUpdatePengurus.image),1)]),e("div",ge,[me,c(e("input",{type:"text",class:"form-control",id:"nama","onUpdate:modelValue":o[5]||(o[5]=s=>t.dataUpdatePengurus.nama=s),placeholder:"Masukkan nama"},null,512),[[p,t.dataUpdatePengurus.nama]])]),e("div",be,[_e,c(e("textarea",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=s=>t.dataUpdatePengurus.deskripsi=s),placeholder:"Masukkan deskripsi"},null,512),[[p,t.dataUpdatePengurus.deskripsi]])])])]),e("div",ke,[fe,e("button",{type:"button",class:"btn btn-primary",onClick:o[7]||(o[7]=(...s)=>t.updatePengurus&&t.updatePengurus(...s))}," Update ")])])])])],64))}});export{Te as default};
